{% extends "accounts/base.html" %}

{% block head %}
    <title>Uni√≥n Digital | Sign Up</title>
{% endblock head %}

{% block content %}
    {% load static %}
    
    <form  method="POST" action="{% url 'accounts:signup' %}" class="form animate__animated animate__zoomIn form-slash-efect">
        <img src="{% static 'logos/3.jpg' %}" alt="logo">
        {% csrf_token %}
        <div style="display: block; height: 100px;"></div>
        <div class="slash-efect slash-efect-show">
            <input class="form-control" type="text" placeholder="User Name" name="username" >
            <input class="form-control" type="email" placeholder="Email" name="email" >
        </div>
        <div class="slash-efect slash-efect-hidde-right">
            <input class="form-control" type="text" placeholder="First Name" name="first_name" >
            <input class="form-control" type="text" placeholder="Last Name" name="last_name" >
        </div>
        <div class="slash-efect slash-efect-hidde-right">
            <input class="form-control" type="password" placeholder="Password" name="password" >
            <input class="form-control" type="password" placeholder="Password Confirmation" name="password_confirmation" >
        </div>
        <span id="left" style="color:#f75c03;font-size: 30px; display: block;cursor:pointer; position: absolute;left:15%; bottom: 25px;" >
            <i class="fas fa-angle-left"></i>
        </span>
        <span id="right" style="color:#f75c03;font-size: 30px; display: block;cursor:pointer; position: absolute;left:25%; bottom: 25px;">
            <i class="fas fa-angle-right"></i>
        </span>
        <button type="submit" class="form-control btn-success">Sign Up</button>
    </form>
    {% if form.errors %}
    <div class="message message-error animate__animated animate__slideInDown" id="messageError">
        <div class="header">
            <span><i class="fas fa-exclamation"></i></span> 
        </div>
        <div class="body">
            {% if form.username.errors %}
                <p>Usuario:</p>
                <ul>
                {% for error in form.username.errors %}
                    <li>{{error}}</li>
                {% endfor %}
                </ul>
            {% endif %}
    
            {% if form.email.errors %}
                <p>Email:</p>
                <ul>
                {% for error in form.email.errors %}
                    <li>{{error}}</li>
                {% endfor %}
                </ul>
            {% endif %}
            
            {% if form.first_name.errors %}
                <p>First_name:</p>
                <ul>
                {% for error in form.first_name.errors %}
                    <li>{{error}}</li>
                {% endfor %}
                </ul>
            {% endif %}
    
            {% if form.last_name.errors %}
                <p>Last_name:</p>
                <ul>
                {% for error in form.last_name.errors %}
                    <li>{{error}}</li>
                {% endfor %}
                </ul>
            {% endif %}
    
            {% if form.password.errors %}
                <p>Password:</p>
                <ul>
                {% for error in form.password.errors %}
                    <li>{{error}}</li>
                {% endfor %}
                </ul>
            {% endif %}
            
            {% if  form.non_field_errors  %}
                <p>Password Confirmation:</p>
                <ul style="padding: 0;margin:0">
                    <li>{{form.non_field_errors}}</li>
                </ul>
            {% endif %}
            
        </div>
        <div class="footer">
            <button id="close-message-error" >OK</button>
        </div>
    </div>
    <button class="btn-error" id="open-message-error">
        <i class="fas fa-list"></i>
    </button> 
    {% endif %}
    <script>
        /*                  Controls to slice efect in forms                */

        divToHidde = Array.from(document.getElementsByClassName('slash-efect'));
        divShowed = document.getElementsByClassName('slash-efect-show');
        hiddeLeftButton = document.getElementById('right');
        hiddeRightButton = document.getElementById('left');

        let index = 0;

        //Events in buttons
        hiddeLeftButton.addEventListener('click',(e)=>{
            if(index<divToHidde.length-1){
                index++; 
                hiddeToLeft(index,divToHidde);
            }
        });

        hiddeRightButton.addEventListener('click',(e)=>{
            if(index>0){
                index--; 
                hiddeToRight(index,divToHidde);
            }
        });

        //Functions hidde
        function hiddeToLeft(index,array){
            divShowed[0].classList.add("slash-efect-hidde-left");
            divShowed[0].classList.remove("slash-efect-show");
            array[index].classList.remove("slash-efect-hidde-right");
            array[index].classList.add('slash-efect-show');
        }

        function hiddeToRight(index,array){
            divShowed[0].classList.add("slash-efect-hidde-right");
            divShowed[0].classList.remove("slash-efect-show");
            array[index].classList.remove("slash-efect-hidde-left");
            array[index].classList.add('slash-efect-show');
        }

        /*                      Controls to hidde message error                         */

        btnCloseMessageError = document.getElementById("close-message-error");
        btnOpenMessageError = document.getElementById("open-message-error");
        messageError = document.getElementById("messageError");
        //Event click in buttons:
        btnCloseMessageError.addEventListener('click',(e)=>{
            messageError.classList.remove("animate__slideInDown");
            messageError.classList.add("animate__slideOutUp");
        });
        btnOpenMessageError.addEventListener('click',(e)=>{
            messageError.classList.remove("animate__slideInDown");
            messageError.classList.add("animate__slideOutUp");
        });
    </script>
{% endblock content %}